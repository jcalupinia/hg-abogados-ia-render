services:
  - type: web
    name: hg-abogados-ia
    env: python
    region: oregon
    plan: professional
    buildCommand: |
      echo "ðŸš€ Configurando entorno controlado de H&G Abogados IA"
      echo "ðŸ“¦ Instalando dependencias del sistema base..."
      apt-get update && apt-get install -y python3.10 python3.10-dev python3.10-venv python3-pip g++ make
      ln -sf /usr/bin/python3.10 /usr/bin/python
      ln -sf /usr/bin/pip3 /usr/bin/pip
      python --version
      pip install --upgrade pip setuptools wheel
      echo "ðŸ“œ Instalando librerÃ­as del proyecto..."
      pip install -r requirements.txt
      echo "ðŸ§  Instalando Playwright con Chromium..."
      playwright install --with-deps chromium
      echo "âœ… ConfiguraciÃ³n del entorno completada exitosamente."
    startCommand: gunicorn -k uvicorn.workers.UvicornWorker main:app
    autoDeploy: true
    envVars:
      - key: PYTHON_VERSION
        value: 3.10.12
      - key: FIELWEB_USERNAME
        value: consultor@hygabogados.ec
      - key: FIELWEB_PASSWORD
        value: consultor@hygabogados.ec
      - key: FIELWEB_LOGIN_URL
        value: https://www.fielweb.com/Cuenta/Login.aspx
      - key: X_API_KEY
        value: HYGABOGADOS-SECURE-2025
